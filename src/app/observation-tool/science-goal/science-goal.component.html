<!--
  ~ ALMA - Atacama Large Millimeter Array
  ~ Copyright (c) UKATC - UK Astronomy Technology Centre, Science and Technology Facilities Council, 2018
  ~ (in the framework of the ALMA collaboration).
  ~ All rights reserved.
  ~
  ~ This library is free software; you can redistribute it and/or
  ~ modify it under the terms of the GNU Lesser General Public
  ~ License as published by the Free Software Foundation; either
  ~ version 2.1 of the License, or (at your option) any later version.
  ~
  ~ This library is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
  ~ Lesser General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Lesser General Public
  ~ License along with this library; if not, write to the Free Software
  ~ Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307  USA
  -->

<div class="ui grid">
  <div class="column"
       [ngClass]="menuOpen ? 'two wide' : 'one wide'">
    <button *ngIf="!menuOpen"
            class="ui large right attached primary button tablet or lower hidden"
            (click)="menuOpen = !menuOpen"><i class="sidebar icon"></i></button>
    <div *ngIf="menuOpen"
         class="ui fluid borderless vertical menu tablet or lower hidden">
      <div class="inverted primary header link item"
           (click)="menuOpen = !menuOpen"><i class="arrow left icon"></i>
        {{goalName}}
      </div>
      <div class="link item"
           [routerLink]="'general'"
           [routerLinkActive]="['active']">
        General
        <i class="info circle icon"></i>
      </div>
      <div class="item"
           [class.header]="router.url.indexOf('field-setup') > -1"
           [class.active]="router.url.indexOf('field-setup') > -1">
        Field Setup
        <i class="map icon"></i>
        <div class="secondary menu">
          <div *ngFor="let target of _targets; let i = index"
               class="link item"
               [routerLink]="'field-setup'"
               [class.active]="router.url.indexOf('field-setup') > -1 && i === currentTarget"
               (click)="changeTarget(i)">
            {{target.sourceName}}
          </div>
          <div class="item">
            <div class="ui tiny compact labeled icon buttons">
              <button class="ui primary button"
                      (click)="addSource()"><i class="add icon"></i>Add
              </button>
              <button class="ui red button"
                      (click)="removeSource()"><i class="trash icon"></i>Delete
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="link item"
           [routerLink]="'spectral-setup'"
           [routerLinkActive]="['active']">
        Spectral Setup
        <i class="chart line icon"></i>
      </div>
      <div class="link item"
           [routerLink]="'calibration-setup'"
           [routerLinkActive]="['active']">
        Calibration Setup
        <i class="crosshairs icon"></i>
      </div>
      <div class="link item"
           [routerLink]="'control-performance'"
           [routerLinkActive]="['active']">
        Control and Performance
        <i class="stopwatch icon"></i>
      </div>
      <div class="link item"
           [routerLink]="'technical-justification'"
           [routerLinkActive]="['active']">
        Technical Justification
        <i class="balance scale icon"></i>
      </div>
    </div>
  </div>
  <div class="column"
       [ngClass]="menuOpen ? 'thirteen wide' : 'fourteen wide' ">
    <router-outlet></router-outlet>
    <div class="ui tablet mobile only bottom fixed fluid six item icon menu">
      <div class="link item"
           [routerLink]="'general'"
           [routerLinkActive]="['active']">
        <i class="info circle icon"></i>
      </div>
      <div class="item"
           [class.active]="router.url.indexOf('field-setup') > -1">
        <i class="map icon"></i>
      </div>
      <div class="link item"
           [routerLink]="'spectral-setup'"
           [routerLinkActive]="['active']">
        <i class="chart line icon"></i>
      </div>
      <div class="link item"
           [routerLink]="'calibration-setup'"
           [routerLinkActive]="['active']">
        <i class="crosshairs icon"></i>
      </div>
      <div class="link item"
           [routerLink]="'control-performance'"
           [routerLinkActive]="['active']">
        <i class="stopwatch icon"></i>
      </div>
      <div class="link item"
           [routerLink]="'technical-justification'"
           [routerLinkActive]="['active']">
        <i class="balance scale icon"></i>
      </div>
    </div>
  </div>
  <div class="one wide column"></div>
</div>
