<form class="ui form container" [formGroup]="proposalForm">
  <h3 class="ui top attached blue header">Proposal Information</h3>
  <div class="ui bottom attached segment">
    <div class="field">
      <label for="titleInput">Proposal Title</label>
      <input id="titleInput"
             type="text"
             formControlName="prp_title">
    </div>
    <div class="field">
      <label for="cycleInput">Proposal Cycle</label>
      <input id="cycleInput"
             type="text"
             formControlName="prp_cycle">
    </div>
    <div class="field">
      <label for="abstractTextArea">Abstract</label>
      <textarea #abstractTextArea
                id="abstractTextArea"
                rows="5"
                formControlName="prp_abstract"></textarea>
      <p>Characters remaining: {{1200-abstractTextArea.value.length}}</p>
    </div>
    <div class="field">
      <label for="relatedProposalsTextArea">Related Proposals</label>
      <textarea id="relatedProposalsTextArea"
                rows="5"
                formControlName="prp_relatedProposals"></textarea>
    </div>
    <div class="field">
      <label for="previousProposalsTextArea">Previous Proposals</label>
      <textarea id="previousProposalsTextArea"
                rows="5"
                formControlName="prp_previousProposals"></textarea>
    </div>
    <div class="field">
      <label>Student Project</label>
      <sui-checkbox formControlName="prp_studentProject"></sui-checkbox>
    </div>
  </div>
  <h3 class="ui top attached blue header">Proposal Type</h3>
  <div class="ui bottom attached segment">
    <div class="field">
      <div class="inline fields">
        <div class="field" *ngFor="let typeRadio of typeRadios">
          <sui-radio-button id="{{typeRadio.id}}"
                            name="typeRadios"
                            value="{{typeRadio.id}}"
                            formControlName="prp_proposalTypeString">
            {{typeRadio.text}}
          </sui-radio-button>
        </div>
      </div>
    </div>
  </div>
  <h3 class="ui top attached blue header">Scientific Category</h3>
  <div class="ui bottom attached segment">
    <div class="inline fields">
      <div class="field" *ngFor="let categoryRadio of categoryKeys(categoryRadios)">
        <sui-radio-button id="{{categoryRadios[categoryRadio].value}}"
                          name="categoryRadios"
                          value="{{categoryRadios[categoryRadio].text}}"
                          (currentValueChange)="categoryRadioChange($event)"
                          formControlName="prp_scientificCategoryString">
          {{categoryRadios[categoryRadio].text}}
        </sui-radio-button>
      </div>
    </div>

    <div class="field">
      <!--<label for="keywordSelector">Keywords (chosen {{-->
      <!--(project | async)?.proposalForm.keywords === null ? 0 :-->
      <!--(project | async)?.proposalForm.keywords.length}} of 2)</label>-->
      <sui-multi-select #keywordSelector
                        id="keywordSelector"
                        class="selection"
                        [isSearchable]="true"
                        (maxSelected)="2"
                        [options]="categoryRadios[chosenCategory].keywords"
                        formControlName="prp_keywords">
        <sui-select-option *ngFor="let option of keywordSelector.filteredOptions"
                           [value]="option">
        </sui-select-option>
      </sui-multi-select>
    </div>
  </div>
  <h3 class="ui top attached blue header">Investigators</h3>
  <div class="ui bottom attached segment">
    <table class="ui celled table">
      <thead>
      <tr>
        <th>Type</th>
        <th>Full Name</th>
        <th>Email</th>
        <th>Affiliation</th>
        <th>ALMA ID</th>
        <th>Executive</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngIf="pi">
        <td>PI</td>
        <td>{{pi.fullName}}</td>
        <td>{{pi.eMail}}</td>
        <td>{{pi.organisation}}</td>
        <td>{{pi.userId}}</td>
        <td>{{pi.allowedExec}}</td>
      </tr>
      </tbody>
      <tfoot>
      <tr>
        <th colspan="6">
          <div class="ui right floated tiny compact labeled icon buttons">
            <button class="ui blue button"
                    (click)="selectPi()"><i class="add user icon"></i> Select PI
            </button>
            <button class="ui blue button"><i class="add user icon"></i> Add CoPI</button>
            <button class="ui blue button"><i class="add user icon"></i> Add Collaborator</button>
            <button class="ui red button"><i class="remove user icon"></i> Remove Collaborator</button>
            <button class="ui basic blue button"><i class="file icon"></i> Add from Proposal</button>
          </div>
        </th>
      </tr>
      </tfoot>
    </table>
  </div>
  <h3 class="ui top attached blue header">Science Case (Mandatory, PDF, 4 pages max.)</h3>
  <div class="ui bottom attached segment">
    <div class="field">
      <input title="science case input" type="text">
    </div>
    <div class="field">
      <div class="ui right floated tiny compact labeled icon buttons">
        <button class="ui blue button"><i class="attach icon"></i> Attach</button>
        <button class="ui red button"><i class="remove icon"></i> Detach</button>
        <button class="ui basic blue button"><i class="unhide icon"></i> View</button>
      </div>
    </div>
    <div style="height: 2em"></div>
  </div>
  <h3 class="ui top attached blue header">Duplicate Observations</h3>
  <div class="ui bottom attached segment">
    <textarea title="Duplicate observations input"
              rows="5"
              formControlName="prp_duplicateObservations"></textarea>
  </div>
</form>
