<form class="ui form container" [formGroup]="proposalForm">
  <div class="ui segment">
    <h4 class="ui dividing header">Proposal Information</h4>
    <div class="field">
      <label for="titleInput">Proposal Title</label>
      <input id="titleInput"
             type="text"
             formControlName="title">
    </div>
    <div class="field">
      <label for="cycleInput">Proposal Cycle</label>
      <input id="cycleInput"
             type="text"
             formControlName="cycle">
    </div>
    <div class="field">
      <label for="abstractTextArea">Abstract</label>
      <textarea #abstractTextArea
                id="abstractTextArea"
                rows="5"
                formControlName="abs"></textarea>
      <p>Characters remaining: {{1200-abstractTextArea.value.length}}</p>
    </div>
    <div class="field">
      <label for="relatedProposalsTextArea">Related Proposals</label>
      <textarea id="relatedProposalsTextArea"
                rows="5"
                formControlName="relatedProposals"></textarea>
    </div>
    <div class="field">
      <label for="previousProposalsTextArea">Previous Proposals</label>
      <textarea id="previousProposalsTextArea"
                rows="5"
                formControlName="previousProposals"></textarea>
    </div>
    <div class="field">
      <label>Student Project</label>
      <sui-checkbox formControlName="studentProject"></sui-checkbox>
    </div>
  </div>
  <div class="ui segment">
    <div class="field">
      <h4 class="ui dividing header">Proposal Type</h4>
      <div class="inline fields">
        <div class="field" *ngFor="let typeRadio of typeRadios">
          <sui-radio-button id="{{typeRadio.id}}"
                            name="typeRadios"
                            value="{{typeRadio.id}}"
                            formControlName="proposalType">
            {{typeRadio.text}}
          </sui-radio-button>
        </div>
      </div>
    </div>
  </div>
  <div class="ui segment">
    <h4 class="ui dividing header">Scientific Category</h4>
    <div class="inline fields">
      <div class="field" *ngFor="let categoryRadio of categoryKeys(categoryRadios)">
        <sui-radio-button id="{{categoryRadios[categoryRadio].value}}"
                          name="categoryRadios"
                          value="{{categoryRadios[categoryRadio].text}}"
                          (currentValueChange)="categoryRadioChange($event)"
                          formControlName="scientificCategory">
          {{categoryRadios[categoryRadio].text}}
        </sui-radio-button>
      </div>
    </div>

    <div class="field">
      <!--<label for="keywordSelector">Keywords (chosen {{-->
      <!--(project | async)?.proposalForm.keywords === null ? 0 :-->
      <!--(project | async)?.proposalForm.keywords.length}} of 2)</label>-->
      <sui-multi-select #keywordSelector
                        id="keywordSelector"
                        class="selection"
                        [isSearchable]="true"
                        (maxSelected)="2"
                        [options]="categoryRadios[chosenCategory].keywords"
                        formcontrolname="keywords">
        <sui-select-option *ngFor="let option of keywordSelector.filteredOptions"
                           [value]="option">
        </sui-select-option>
      </sui-multi-select>
    </div>
  </div>
  <div class="ui segment">
    <h4 class="ui dividing header">Investigators</h4>
    <table class="ui celled table">
      <thead>
        <tr>
          <th>Type</th>
          <th>Full Name</th>
          <th>Email</th>
          <th>Affiliation</th>
          <th>ALMA ID</th>
          <th>Executive</th>
        </tr>
      </thead>
      <tbody formArrayName="investigators">
        <tr *ngFor="let row of investigators.controls; let i = index" [formGroupName]="i">
          <td>PI</td>
          <td>{{row.value.fullName}}</td>
          <td>{{row.value.eMail}}</td>
          <td>{{row.value.organisation}}</td>
          <td>{{row.value.userId}}</td>
          <td>{{row.value.associatedExec}}</td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <th colspan="6">
            <div class="ui right floated tiny compact icon buttons">
              <button class="ui blue button"><i class="add user icon"></i> Select PI</button>
              <button class="ui blue button"><i class="add user icon"></i> Add CoPI</button>
              <button class="ui blue button"><i class="add user icon"></i> Add Collaborator</button>
              <button class="ui red button"><i class="remove user icon"></i> Remove Collaborator</button>
              <button class="ui basic blue button"><i class="file icon"></i> Add from Proposal</button>
            </div>
          </th>
        </tr>
      </tfoot>
    </table>
  </div>
  <div class="ui segment">
    <h4 class="ui dividing header">Science Case (Mandatory, PDF, 4 pages max.)</h4>
    <div class="field">
      <input title="science case input" type="text">
    </div>
    <div class="field">
      <div class="ui right floated tiny compact icon buttons">
        <button class="ui blue button"><i class="attach icon"></i> Attach</button>
        <button class="ui red button"><i class="remove icon"></i> Detach</button>
        <button class="ui basic blue button"><i class="unhide icon"></i> View</button>
      </div>
    </div>
    <div style="height: 2em"></div>
  </div>
  <div class="ui segment">
    <h4 class="ui dividing header">Duplicate Observations</h4>
    <textarea title="Duplicate observations input"
              rows="5"
              formControlName="duplicateObservations"></textarea>
  </div>
</form>
